<!doctype html>
<html>

  <head>
    <title>UniMelb CCS</title>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/jspsych.js"></script>
    <script src="./js/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="./js/plugins/jspsych-html-keyboard-response.js"></script>
	<script src="./js/plugins/jspsych-html-button-response.js"></script>
	<script src="./js/plugins/jspsych-html-slider-response.js"></script>
	<script src="./js/plugins/jspsych-survey-text.js"></script>
	<script src="./js/welcome.js"></script>
    <link href="./js/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <link href="./js/css/wrapper.css" rel="stylesheet" type="text/css"></link>
  </head>


  <body>
	  <div id="welcome"></div>
  </body>

  <script>

    var condnames = ["picto_orig"]
    var condnum = condnames.length;
  
    var workerId= jsPsych.data.getURLVariable("workerId")
    var assignmentId= jsPsych.data.getURLVariable("assignmentId")
    var hitId= jsPsych.data.getURLVariable("hitId")

    var subject_id = jsPsych.data.getURLVariable("PROLIFIC_PID")
    var study_id = jsPsych.data.getURLVariable("STUDY_ID")
    var session_id = jsPsych.data.getURLVariable("SESSION_ID")

  
    var condition = jsPsych.data.getURLVariable("cond")
    if (condition === undefined) {
        condition = 'missing'
    }
    if (!(condnames.includes(condition))) {
        condition= jsPsych.randomization.shuffle(condnames)[0];
    }
    var endperiod= jsPsych.data.getURLVariable("endperiod")
    if (endperiod === undefined) {
        endperiod='hwtrad'
        //endperiod='traditional'
    }
    var skel= jsPsych.data.getURLVariable("skel")
    if (skel=== undefined) {
        skel=''
    }
    var skipinstructions= jsPsych.data.getURLVariable("skipinstructions")


    var startperiod = "oracle"

    //console.log(condition)
    
    function splitcond(condname) {
        return(condname.split("_"))
	}

    function joinparts(parts) {
        return(parts.join("_"))
	}

    /* initialise timeline*/
    var timeline=[];
    var introloop=[];

    var turkcode = 'Q74' + (Math.floor(Math.random() * 899999) + 100000).toString() + '7' + (Math.floor(Math.random() * 89) + 10).toString()   + '40hsfr';
    var subjid = 'subj_' + (Math.floor(Math.random() * 999999999999)).toString(); 

    var waittime = 9000;

    var images = ['./img/hanzi_intro1.png',
                  './img/hanzi_intro2.png',
                  './img/hanzi_intro3.png',
                  './img/hanzi_intro4.png',
                  './img/hanzi_intro5.png',
                  './img/hanzi_intro6.png',
                  './img/hanzi_intro7.png',
                  './img/hanzi_intro8.png',
                  './img/hanzi_intro9.png',
                  './img/hanzi_intro10.png',
'./img/hwtrad_control_乇_七_hwtrad.png',	
'./img/hwtrad_control_乇_七_oracle.png',
'./img/hwtrad_control_刓_元_hwtrad.png',	
'./img/hwtrad_control_刓_元_oracle.png',
'./img/hwtrad_control_匜_也_hwtrad.png',	
'./img/hwtrad_control_匜_也_oracle.png',
'./img/hwtrad_control_卡_上_hwtrad.png',	
'./img/hwtrad_control_卡_上_oracle.png',
'./img/hwtrad_control_咫_只_hwtrad.png',	
'./img/hwtrad_control_咫_只_oracle.png',
 './img/丁_hwtrad.png',
 './img/不_hwtrad.png',
 './img/且_hwtrad.png',
 './img/丘_hwtrad.png',
 './img/丙_hwtrad.png',
 './img/东_hwtrad.png',
 './img/丰_hwtrad.png',
 './img/丹_hwtrad.png',
 './img/主_hwtrad.png',
 './img/乃_hwtrad.png',
 './img/乙_hwtrad.png',
 './img/九_hwtrad.png',
 './img/于_hwtrad.png',
 './img/云_hwtrad.png',
 './img/井_hwtrad.png',
 './img/亚_hwtrad.png',
 './img/京_hwtrad.png',
 './img/人_hwtrad.png',
 './img/介_hwtrad.png',
 './img/仓_hwtrad.png',
 './img/以_hwtrad.png',
 './img/侯_hwtrad.png',
 './img/儿_hwtrad.png',
 './img/兆_hwtrad.png',
 './img/克_hwtrad.png',
 './img/兔_hwtrad.png',
 './img/兕_hwtrad.png',
 './img/入_hwtrad.png',
 './img/兽_hwtrad.png',
 './img/册_hwtrad.png',
 './img/函_hwtrad.png',
 './img/刀_hwtrad.png',
 './img/勺_hwtrad.png',
 './img/勿_hwtrad.png',
 './img/午_hwtrad.png',
 './img/单_hwtrad.png',
 './img/南_hwtrad.png',
 './img/卜_hwtrad.png',
 './img/卯_hwtrad.png',
 './img/又_hwtrad.png',
 './img/口_hwtrad.png',
 './img/句_hwtrad.png',
 './img/向_hwtrad.png',
 './img/吕_hwtrad.png',
 './img/周_hwtrad.png',
 './img/土_hwtrad.png',
 './img/壬_hwtrad.png',
 './img/壶_hwtrad.png',
 './img/大_hwtrad.png',
 './img/夫_hwtrad.png',
 './img/夭_hwtrad.png',
 './img/女_hwtrad.png',
 './img/子_hwtrad.png',
 './img/它_hwtrad.png',
 './img/宫_hwtrad.png',
 './img/寅_hwtrad.png',
 './img/尸_hwtrad.png',
 './img/山_hwtrad.png',
 './img/川_hwtrad.png',
 './img/工_hwtrad.png',
 './img/己_hwtrad.png',
 './img/巳_hwtrad.png',
 './img/巴_hwtrad.png',
 './img/巾_hwtrad.png',
 './img/帝_hwtrad.png',
 './img/庚_hwtrad.png',
 './img/廾_hwtrad.png',
 './img/弓_hwtrad.png',
 './img/弗_hwtrad.png',
 './img/戈_hwtrad.png',
 './img/户_hwtrad.png',
 './img/才_hwtrad.png',
 './img/文_hwtrad.png',
 './img/斗_hwtrad.png',
 './img/斤_hwtrad.png',
 './img/方_hwtrad.png',
 './img/日_hwtrad.png',
 './img/易_hwtrad.png',
 './img/昔_hwtrad.png',
 './img/曲_hwtrad.png',
 './img/月_hwtrad.png',
 './img/木_hwtrad.png',
 './img/未_hwtrad.png',
 './img/杏_hwtrad.png',
 './img/果_hwtrad.png',
 './img/止_hwtrad.png',
 './img/歹_hwtrad.png',
 './img/母_hwtrad.png',
 './img/氏_hwtrad.png',
 './img/气_hwtrad.png',
 './img/水_hwtrad.png',
 './img/永_hwtrad.png',
 './img/泉_hwtrad.png',
 './img/火_hwtrad.png',
 './img/燕_hwtrad.png',
 './img/父_hwtrad.png',
 './img/牛_hwtrad.png',
 './img/犬_hwtrad.png',
 './img/率_hwtrad.png',
 './img/玉_hwtrad.png',
 './img/用_hwtrad.png',
 './img/甫_hwtrad.png',
 './img/田_hwtrad.png',
 './img/甲_hwtrad.png',
 './img/登_hwtrad.png',
 './img/白_hwtrad.png',
 './img/目_hwtrad.png',
 './img/眉_hwtrad.png',
 './img/矢_hwtrad.png',
 './img/石_hwtrad.png',
 './img/禾_hwtrad.png',
 './img/秉_hwtrad.png',
 './img/秋_hwtrad.png',
 './img/米_hwtrad.png',
 './img/缶_hwtrad.png',
 './img/网_hwtrad.png',
 './img/羊_hwtrad.png',
 './img/羽_hwtrad.png',
 './img/老_hwtrad.png',
 './img/而_hwtrad.png',
 './img/耳_hwtrad.png',
 './img/臣_hwtrad.png',
 './img/自_hwtrad.png',
 './img/舟_hwtrad.png',
 './img/若_hwtrad.png',
 './img/虎_hwtrad.png',
 './img/蜀_hwtrad.png',
 './img/衣_hwtrad.png',
 './img/西_hwtrad.png',
 './img/角_hwtrad.png',
 './img/豆_hwtrad.png',
 './img/象_hwtrad.png',
 './img/贝_hwtrad.png',
 './img/车_hwtrad.png',
 './img/辛_hwtrad.png',
 './img/辰_hwtrad.png',
 './img/长_hwtrad.png',
 './img/门_hwtrad.png',
 './img/雨_hwtrad.png',
 './img/面_hwtrad.png',
 './img/页_hwtrad.png',
 './img/飞_hwtrad.png',
 './img/首_hwtrad.png',
 './img/马_hwtrad.png',
 './img/高_hwtrad.png',
 './img/鬼_hwtrad.png',
 './img/鱼_hwtrad.png',
 './img/鸟_hwtrad.png',
 './img/鹿_hwtrad.png',
 './img/黄_hwtrad.png',
 './img/鼎_hwtrad.png',
 './img/鼠_hwtrad.png',
 './img/齿_hwtrad.png',
 './img/龟_hwtrad.png',
 './img/糸_hwtrad.png',
 './img/丁_oracle.png',
 './img/不_oracle.png',
 './img/且_oracle.png',
 './img/丘_oracle.png',
 './img/丙_oracle.png',
 './img/东_oracle.png',
 './img/丰_oracle.png',
 './img/丹_oracle.png',
 './img/主_oracle.png',
 './img/乃_oracle.png',
 './img/乙_oracle.png',
 './img/九_oracle.png',
 './img/于_oracle.png',
 './img/云_oracle.png',
 './img/井_oracle.png',
 './img/亚_oracle.png',
 './img/京_oracle.png',
 './img/人_oracle.png',
 './img/介_oracle.png',
 './img/仓_oracle.png',
 './img/以_oracle.png',
 './img/侯_oracle.png',
 './img/儿_oracle.png',
 './img/兆_oracle.png',
 './img/克_oracle.png',
 './img/兔_oracle.png',
 './img/兕_oracle.png',
 './img/入_oracle.png',
 './img/兽_oracle.png',
 './img/册_oracle.png',
 './img/函_oracle.png',
 './img/刀_oracle.png',
 './img/勺_oracle.png',
 './img/勿_oracle.png',
 './img/午_oracle.png',
 './img/单_oracle.png',
 './img/南_oracle.png',
 './img/卜_oracle.png',
 './img/卯_oracle.png',
 './img/又_oracle.png',
 './img/口_oracle.png',
 './img/句_oracle.png',
 './img/向_oracle.png',
 './img/吕_oracle.png',
 './img/周_oracle.png',
 './img/土_oracle.png',
 './img/壬_oracle.png',
 './img/壶_oracle.png',
 './img/大_oracle.png',
 './img/夫_oracle.png',
 './img/夭_oracle.png',
 './img/女_oracle.png',
 './img/子_oracle.png',
 './img/它_oracle.png',
 './img/宫_oracle.png',
 './img/寅_oracle.png',
 './img/尸_oracle.png',
 './img/山_oracle.png',
 './img/川_oracle.png',
 './img/工_oracle.png',
 './img/己_oracle.png',
 './img/巳_oracle.png',
 './img/巴_oracle.png',
 './img/巾_oracle.png',
 './img/帝_oracle.png',
 './img/庚_oracle.png',
 './img/廾_oracle.png',
 './img/弓_oracle.png',
 './img/弗_oracle.png',
 './img/戈_oracle.png',
 './img/户_oracle.png',
 './img/才_oracle.png',
 './img/文_oracle.png',
 './img/斗_oracle.png',
 './img/斤_oracle.png',
 './img/方_oracle.png',
 './img/日_oracle.png',
 './img/易_oracle.png',
 './img/昔_oracle.png',
 './img/曲_oracle.png',
 './img/月_oracle.png',
 './img/木_oracle.png',
 './img/未_oracle.png',
 './img/杏_oracle.png',
 './img/果_oracle.png',
 './img/止_oracle.png',
 './img/歹_oracle.png',
 './img/母_oracle.png',
 './img/氏_oracle.png',
 './img/气_oracle.png',
 './img/水_oracle.png',
 './img/永_oracle.png',
 './img/泉_oracle.png',
 './img/火_oracle.png',
 './img/燕_oracle.png',
 './img/父_oracle.png',
 './img/牛_oracle.png',
 './img/犬_oracle.png',
 './img/率_oracle.png',
 './img/玉_oracle.png',
 './img/用_oracle.png',
 './img/甫_oracle.png',
 './img/田_oracle.png',
 './img/甲_oracle.png',
 './img/登_oracle.png',
 './img/白_oracle.png',
 './img/目_oracle.png',
 './img/眉_oracle.png',
 './img/矢_oracle.png',
 './img/石_oracle.png',
 './img/禾_oracle.png',
 './img/秉_oracle.png',
 './img/秋_oracle.png',
 './img/米_oracle.png',
 './img/缶_oracle.png',
 './img/网_oracle.png',
 './img/羊_oracle.png',
 './img/羽_oracle.png',
 './img/老_oracle.png',
 './img/而_oracle.png',
 './img/耳_oracle.png',
 './img/臣_oracle.png',
 './img/自_oracle.png',
 './img/舟_oracle.png',
 './img/若_oracle.png',
 './img/虎_oracle.png',
 './img/蜀_oracle.png',
 './img/衣_oracle.png',
 './img/西_oracle.png',
 './img/角_oracle.png',
 './img/豆_oracle.png',
 './img/象_oracle.png',
 './img/贝_oracle.png',
 './img/车_oracle.png',
 './img/辛_oracle.png',
 './img/辰_oracle.png',
 './img/长_oracle.png',
 './img/门_oracle.png',
 './img/雨_oracle.png',
 './img/面_oracle.png',
 './img/页_oracle.png',
 './img/飞_oracle.png',
 './img/首_oracle.png',
 './img/马_oracle.png',
 './img/高_oracle.png',
 './img/鬼_oracle.png',
 './img/鱼_oracle.png',
 './img/鸟_oracle.png',
 './img/鹿_oracle.png',
 './img/黄_oracle.png',
 './img/鼎_oracle.png',
 './img/鼠_oracle.png',
 './img/齿_oracle.png',
 './img/龟_oracle.png',
 './img/糸_oracle.png',
]

    var ccparts = splitcond(condition)

    /* function to start the jsPsych experiment */
    function startExperiment(){

      // record the turkcode in the jsPsych data
      jsPsych.data.addProperties({
        workerId: workerId,
        assignmentId: assignmentId,
        hitId: hitId,
        subject_id: subject_id,
        study_id: study_id,
        session_id: session_id, 
        turkcode: turkcode,
        condition: condition,
        endperiod: endperiod,
        subjid: subjid,
      });

      jsPsych.init({
        timeline: timeline,
        show_progress_bar: false,
        preload_images: images,
        on_finish: function() {
            endExperiment( jsPsych.data.get().csv())
        }
      });
    }

    /* save and finish */
    function endExperiment(dataset) {
      $.post('submit',{"content": dataset}).then(function () { 
        console.log("data saved");
        window.location = "https://app.prolific.co/submissions/complete?cc=11EDA198" })
    }

    /* change the display property of a set of objects */
    function setDisplay(theClass, theValue) {
      var i, classElements = document.getElementsByClassName(theClass);
      for (i = 0; i < classElements.length; i = i + 1) {
        classElements[i].style.visibility = theValue;
      }
    }

    /* A grossly typical way to run the instructions is to go through a series
    of small slides (implemeted as trials in jsPsych) with a minimum reading time
    enforced for each slide, such that the "continue" button doesn't appear until
    the time elapses. At the end of the instructions, there is a short quiz, and if
    the participant gets them wrong they are sent back to the beginning */

    var intros = {}
    var tests= {}
    
var characters = ['丁', '不', '且', '丘', '丙', '东', '丰', '丹', '主', '乃', '乙', '九', '于', '云', '井', '亚', '京', '人', '介', '仓', '以', '侯', '儿', '兆', '克', '兔', '兕', '入', '兽', '册', '函', '刀', '勺', '勿', '午', '单', '南', '卜', '卯', '又', '口', '句', '向', '吕', '周', '土', '壬', '壶', '大', '夫', '夭', '女', '子', '它', '宫', '寅', '尸', '山', '川', '工', '己', '巳', '巴', '巾', '帝', '庚', '廾', '弓', '弗', '戈', '户', '才', '文', '斗', '斤', '方', '日', '易', '昔', '曲', '月', '木', '未', '杏', '果', '止', '歹', '母', '氏', '气', '水', '永', '泉', '火', '燕', '父', '牛', '犬', '率', '玉', '用', '甫', '田', '甲', '登', '白', '目', '眉', '矢', '石', '禾', '秉', '秋', '米', '缶', '网', '羊', '羽', '老', '而', '耳', '臣', '自', '舟', '若', '虎', '蜀', '衣', '西', '角', '豆', '象', '贝', '车', '辛', '辰', '长', '门', '雨', '面', '页', '飞', '首', '马', '高', '鬼', '鱼', '鸟', '鹿', '黄', '鼎', '鼠', '齿', '龟', '糸']


    characters = jsPsych.randomization.shuffle(characters)
    characters = characters.slice(0, 50)

    //characters = characters.slice(0, 3)
    //characters = characters.slice(-2)

    var controls = [endperiod + "_control_乇_七",  endperiod + "_control_咫_只", endperiod + "_control_刓_元", endperiod + "_control_匜_也", endperiod + "_control_卡_上"]
    characters = controls.concat( characters )
    characters = jsPsych.randomization.shuffle(characters)

    var oracleleft = [1,0,1]
    var oracleleft = jsPsych.randomization.sampleWithReplacement([0,1], characters.length);


    for (var i = 0; i < condnum; i++) {
        var cname = condnames[i]
        var cparts = splitcond(cname)
        intros[cname] = [ {stimulus: '<img src="./img/hanzi_intro1.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro2.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro3.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro4.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro5.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro6.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro7.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro8.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro9.png" width=800px>'},
                          {stimulus: '<img src="./img/hanzi_intro10.png" width=800px>'},
                        ]
        tests[cname] = choices(characters, oracleleft)
    }

    /* define welcome message block*/
    var welcome_block = {
        type: "html-keyboard-response",
        stimulus: "Welcome to the task. Press any key to begin.",
    };

    /* define intro block */
    var intro_block = {
        type: 'html-button-response',
        button_html: '<button class="jspsych-btn">%choice%</button>',
        choices: ['Click here to continue'],
        is_html: true,
        timeline: intros[condition]
    };


	var test_block = {
	    type: 'html-button-response',
	    choices: ['L3', 'L2', 'L1', 'R1', 'R2', 'R3'],
        post_trial_gap: 300,
        button_html: ['<button class="jspsych-btn" style = "position:absolute; left:35%; top: 45%">%choice%</button>', 
        '<button class="jspsych-btn" style = "position:absolute; left:40%; top: 45%">%choice%</button>',
        '<button class="jspsych-btn" style = "position:absolute; left:45%; top: 45%">%choice%</button>',
        '<button class="jspsych-btn" style = "position:absolute; left:50%; top: 45%">%choice%</button>',
        '<button class="jspsych-btn" style = "position:absolute; left:55%; top: 45%">%choice%</button>',
        '<button class="jspsych-btn" style = "position:absolute; left:60%; top: 45%">%choice%</button>'],
        on_start: function() {setTimeout(function() {setDisplay("jspsych-btn","")}, waittime)},
        is_html: true,
		timeline: tests[condition]
	  };


    // CHOICES: character pair screens

    function choices(characters, oracleleft) {
        var stims = []
        var c = ""
        var origleftsuff = "_" + startperiod
        var origrightsuff = "_" + endperiod
        if (skel.length > 0) {
            origleftsuff = origleftsuff + "_skel" 
            origrightsuff = origrightsuff + "_skel" 
        }

        var j = 1

        for (i = 0; i < characters.length ; i = i + 1) {
            if (oracleleft[i] == 1) {
              leftsuff = origleftsuff
              rightsuff = origrightsuff
            } else {
              leftsuff = origrightsuff
              rightsuff = origleftsuff
            }


            c = characters[i] 
            j = i+1

            stims.push( {stimulus: '<div style="position: absolute;  width: 100%;  left:0%; top: 10%;  text-align:center"> <small>  ' + j + ' of '+ characters.length + ' </small> <br> Please indicate which image is more complex <br> (L3: Left image much more complex <br> R3: Right image much more complex) </div> <div class="float-container"> <div class="float-child"> <img src=img/' + c + leftsuff  + '.png width=200px/> </div> <div class="float-child"> <img src=img/' + c + rightsuff  + '.png width=200px/> </div> </div>'} )

        }            
        return stims
    }

    introloop.push(welcome_block);
    introloop.push(intro_block); 


    var q_texts = ["<b>Question 1</b>: What should you do when you see a pair of characters?",
                  "<b>Question 2</b>: What does a rating of R3 mean?",
                  "<b>Question 3</b>: What should you try to ignore?"
                  ]

    
    var q_answers = [ ["Decide which character is older.", "Decide which character is more complex.", "Rate the similarity of the characters."], 
                           ["Left character is much more complex than the right character", "Left character is slightly more complex than the right character.", "Right character is much more complex than the left character.", "Right character is slightly more complex than the left character."],
                            ["Stroke thickness.", "Imperfections introduced by digitization.", "Stroke thickness and imperfections introduced by digitization."],
                       ]   

    var q_solns = [ 1, 2, 2] 

    var Q0 = {prompt: q_texts[0], options: q_answers[0], required: true}
    var Q1 = {prompt: q_texts[1], options: q_answers[1], required: true}
    var Q2 = {prompt: q_texts[2], options: q_answers[2], required: true}

    var correctstring = '{"Q0":"' + q_answers[0][q_solns[0]] + '","Q1":"' + q_answers[1][q_solns[1]] + '","Q2":"' + q_answers[2][q_solns[2]] +  '"}';



    /* define instruction check block */
    var instructioncorrect = false;
    var instruction_check = {
        type: "survey-multi-choice",
        preamble: ["<p align='center'><b>Check your knowledge before you begin!</b></p>"],
        questions: [Q0, Q1, Q2],
        on_finish: function(data) {
          if( data.responses == correctstring) {
            action = false;
            instructioncorrect = true;
          }
        }
    }
    introloop.push(instruction_check)

    /* define a page for the incorrect response */
    var showsplash = true;
    var splash_screen = {
      type: 'html-button-response',
      timing_post_trial: 0,
      choices: ['Click here to read the instructions again'],
      on_trial_start: function() {setTimeout(function() {setDisplay("jspsych-btn","")}, 500)},
      is_html: true,
      stimulus: 'Unfortunately, at least one of your answers was incorrect.'
    }

    /* ...but push it to a conditional node that only shows it if the response was wrong */
    var conditional_splash = {
      timeline: [splash_screen],
      conditional_function: function(data) {
        return !instructioncorrect // skip if correct
      }
    }
    introloop.push(conditional_splash)


    /* finally, add the entirety of this introductory section to a loop node ... */
    var loop_node = {
      timeline: introloop,
      loop_function: function(data) {
        return !instructioncorrect // stop looping if correct
      }
    }
    // XXX uncomment for instructions
    if (!skipinstructions) {
      timeline.push(loop_node) // ... and add that to the timeline
    }

    var successtrial = {
      type: 'html-button-response',
      timing_post_trial: 0,
      choices: ['Click here to continue'],
      on_trial_start: function() { setTimeout(function() {setDisplay("jspsych-btn","")}, 500)},
      is_html: true,
      stimulus: 'Well done!'
    };
    timeline.push(successtrial);

    timeline.push(test_block);


    var options = [ "A lot", "Some", "A little", "Virtually nothing"]

    var chinese_experience= {
  type: 'survey-multi-choice',
  questions: [
    {prompt: "How much do you know about Chinese characters?", name: 'Vegetables', options: options, required:true},
      ],
};

    timeline.push(chinese_experience);
    
    var survey_trial = {
        type: 'survey-text',
        questions: [
        {prompt: "(Optional) Please let us know if you have any feedback about the task. This is totally optional (you'll get paid regardless). We read everything but if you want us to respond you'll have to leave an email address so we can do so. ", rows: 10, columns: 80},
        ],
    };

    timeline.push(survey_trial);



    var final_trial= {
        type: 'html-button-response',
        button_html: '<button class="jspsych-btn">%choice%</button>',
        choices: ['Finish task'],
        is_html: true,
        stimulus: "Thanks for your participation! Please click the button below to finish the task. The screen will go blank for a few seconds, and you'll then be sent back to Prolific"};

    timeline.push(final_trial);


     // -------------------------------

    /* start by running the "welcome" */
    // console.log(timeline)
    welcome.run();  // XXX: uncomment for ethics, etc
    //startExperiment(); // start the jsPsych experiment

  </script>
</html>
